# ~/.tmuxinator/sd.yml

<% project = (@args[0] && args[0] != 'clean') ? '-' + @args[0] : '' %>

name: sd
root: ~/src/superdesk<%= project %>

on_project_start: '[ "<%= @args[1] or @args[0] %>" = "clean" ] && sd deps <%= project %> && sd wipe && sd populate <%= project %>'

windows:
  - logs:
      layout: even-vertical
      panes:
        - cd ~/src/superdesk<%= project %>/client && npx grunt
        - cd ~/src/newsroom && docker-compose up -d
        - cd ~/src/superdesk<%= project %>/server && python3 -m venv ./env && . ./env/bin/activate && honcho start
  - code:
      layout: main-vertical
      panes:
        - cd ~/src/superdesk-client-core && nvim
  - vtop: vtop
